<div class="dashboard">
  <!-- TOP USER BAR -->
  <header class="top-bar">
    <div class="top-left">
      <div class="greeting-title">Hello, Lekan</div>
      <div class="greeting-sub">Have a nice day</div>
    </div>

    <div class="top-right">
      <button class="icon-button" aria-label="Notifications">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="25"
          height="25"
          viewBox="0 0 25 25"
          fill="none"
        >
          <path
            d="M21.0067 6.50311C21.0087 8.43311 19.4404 10.0047 17.5104 10.0067C15.5804 10.0087 14.0087 8.44037 14.0067 6.51037C14.0047 4.58037 15.5731 3.00874 17.5031 3.00674C19.4331 3.00474 21.0047 4.57311 21.0067 6.50311ZM19.0122 11.7952C18.5124 11.9257 18.0124 12.0062 17.5124 12.0067C16.0546 12.0056 14.6565 11.4267 13.6246 10.3969C12.5926 9.36712 12.0109 7.97031 12.0067 6.51244C12.0052 5.04244 12.5838 3.71184 13.5028 2.72089C13.3211 2.49862 13.0921 2.31968 12.8325 2.19713C12.5729 2.07457 12.2892 2.01147 12.0021 2.01244C10.9021 2.01358 10.003 2.91452 10.0041 4.01451L10.0044 4.30451C7.03536 5.18759 5.00819 7.9197 5.0114 11.0197L5.01762 17.0197L3.0197 19.0218L3.02073 20.0218L21.0207 20.0031L21.0197 19.0031L19.0176 17.0052L19.0122 11.7952ZM12.0238 23.0124C13.1338 23.0113 14.0229 22.1204 14.0218 21.0104L10.0218 21.0145C10.0223 21.5449 10.2336 22.0534 10.609 22.4281C10.9845 22.8028 11.4934 23.013 12.0238 23.0124Z"
            fill="#0A0A0A"
          />
          <circle
            cx="17.5067"
            cy="6.50672"
            r="3.5"
            transform="rotate(-0.0593957 17.5067 6.50672)"
            fill="#4A85F6"
          />
        </svg>
      </button>

      <div class="profile">
        <div class="profile-avatar"></div>
        <div class="profile-text">
          <div class="profile-name">Lekan Okeowo</div>
          <div class="profile-role">Admin</div>
        </div>

        <button class="icon-button caret" aria-label="Profile menu">▾</button>
      </div>
    </div>
  </header>

  <!-- USER DASHBOARD SECTION -->
  <section>
    <div class="card-header">
      <h2>User Dashboard</h2>
    </div>

    <!-- TOOLBAR -->
    <div class="toolbar">
      <div class="toolbar-left">
        <div class="search-wrapper">
          <div class="search-input">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="13"
              height="13"
              viewBox="0 0 13 13"
              fill="none"
            >
              <path
                d="M4.99455 5.01376e-06C5.92653 -0.000998635 6.84025 0.258501 7.63258 0.749219C8.42491 1.23994 9.06432 1.94234 9.47865 2.77716C9.89299 3.61198 10.0657 4.54599 9.97743 5.47378C9.88912 6.40157 9.54326 7.28622 8.97887 8.02788L12.1441 11.1879C12.2638 11.3078 12.3334 11.4687 12.3388 11.638C12.3441 11.8073 12.2848 11.9723 12.1729 12.0994C12.061 12.2266 11.9049 12.3064 11.7363 12.3226C11.5677 12.3389 11.3993 12.2903 11.2652 12.1868L11.2025 12.1316L8.03585 8.97286C7.40502 9.45491 6.66846 9.77981 5.88713 9.92067C5.10579 10.0615 4.30215 10.0143 3.54269 9.78292C2.78323 9.55151 2.08979 9.14259 1.51975 8.58998C0.949714 8.03736 0.519466 7.35695 0.264609 6.60504C0.00975212 5.85312 -0.0623865 5.05133 0.0541622 4.266C0.170711 3.48067 0.472596 2.73439 0.934839 2.0889C1.39708 1.44341 2.00639 0.917274 2.71235 0.554028C3.41831 0.190783 4.20062 0.00086994 4.99455 5.01376e-06ZM4.99593 1.33334C4.02347 1.33435 3.09124 1.72162 2.40432 2.40997C1.7174 3.09831 1.33206 4.03134 1.33306 5.0038C1.33407 5.97626 1.72135 6.90849 2.40969 7.59541C3.09804 8.28233 4.03107 8.66767 5.00353 8.66667C5.97599 8.66566 6.90822 8.27838 7.59514 7.59004C8.28206 6.90169 8.6674 5.96866 8.66639 4.9962C8.66539 4.02374 8.27811 3.09151 7.58977 2.40459C6.90142 1.71767 5.96839 1.33233 4.99593 1.33334Z"
                fill="#404040"
              />
            </svg>
            <input
              type="text"
              placeholder="Search"
              (input)="onSearchChange($any($event.target).value)"
            />
          </div>
        </div>
      </div>

      <div class="toolbar-right">
        <button class="btn primary" (click)="openAddUser()">+ Add User</button>

        <select
          class="select"
          (change)="onSortChange($any($event.target).value)"
        >
          <option>Sort by: Recent</option>
          <option>Sort by: Name</option>
          <option>Sort by: Role</option>
        </select>

        <select class="select">
          <option>Saved searches</option>
        </select>
        <app-dropdown
          label="Filter"
          icon="filter"
          [items]="['Role: Admin', 'Role: User', 'Role: Viewer']"
        ></app-dropdown>
      </div>
    </div>

    <!-- USERS TABLE -->
    <div class="table-wrapper">
      <h2 class="table-header">List Users</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Name</th>
            <th></th>
            <th>Created</th>
            <th>Role</th>
            <th class="col-actions">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let u of users">
            <td>
              <div class="user-name">{{ u.name }}</div>
              <div class="user-email">{{ u.email }}</div>
            </td>
            <td>
              <div
                class="permission"
                [ngClass]="{ employee: u.permission === 'Employee' }"
              >
                {{ u.permission }}
              </div>
            </td>

            <td>{{ u.createdAt }}</td>
            <td>
              <span class="role">
                {{ u.role }}
              </span>
            </td>
            <td class="col-actions">
              <button class="link-button">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  fill="none"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M5.08551 13.2279L7.56634 13.0021L12.233 8.33126L9.98634 6.08376L5.30551 10.7646L5.08551 13.2279ZM11.103 4.96792L13.3488 7.21376L14.9713 5.58876L12.7263 3.34376L11.103 4.96792ZM3.57719 14.7379C3.40219 14.5629 3.31469 14.3196 3.33636 14.0729L3.65219 10.5979C3.68719 10.2171 3.85553 9.85792 4.12719 9.58626L11.6239 2.08959C12.2089 1.50209 13.2697 1.53126 13.8872 2.14709L16.1689 4.42876L16.1697 4.42959C16.8072 5.06792 16.833 6.08292 16.2264 6.69126L8.72886 14.1888C8.45803 14.4596 8.09886 14.6279 7.71719 14.6629L4.24219 14.9788C4.21719 14.9804 4.19219 14.9813 4.16636 14.9813C3.94719 14.9813 3.73469 14.8946 3.57719 14.7379ZM16.6663 17.4813C16.6663 17.9396 16.2913 18.3146 15.833 18.3146H4.16634C3.70884 18.3146 3.33301 17.9396 3.33301 17.4813C3.33301 17.0238 3.70884 16.6479 4.16634 16.6479H15.833C16.2913 16.6479 16.6663 17.0238 16.6663 17.4813Z"
                    fill="#C5CEE0"
                  />
                </svg>
              </button>
              <button class="link-button" (click)="deleteUser(u.id)">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  fill="none"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M8.33335 13.3333C8.33335 13.7917 7.95835 14.1667 7.50002 14.1667C7.04169 14.1667 6.66669 13.7917 6.66669 13.3333V10C6.66669 9.54167 7.04169 9.16667 7.50002 9.16667C7.95835 9.16667 8.33335 9.54167 8.33335 10V13.3333ZM13.3334 13.3333C13.3334 13.7917 12.9584 14.1667 12.5 14.1667C12.0417 14.1667 11.6667 13.7917 11.6667 13.3333V10C11.6667 9.54167 12.0417 9.16667 12.5 9.16667C12.9584 9.16667 13.3334 9.54167 13.3334 10V13.3333ZM15 15.8333C15 16.2925 14.6267 16.6667 14.1667 16.6667H5.83335C5.37335 16.6667 5.00002 16.2925 5.00002 15.8333V6.66667H15V15.8333ZM8.33335 3.60667C8.33335 3.47751 8.51169 3.33334 8.75002 3.33334H11.25C11.4884 3.33334 11.6667 3.47751 11.6667 3.60667V5.00001H8.33335V3.60667ZM17.5 5.00001H16.6667H13.3334V3.60667C13.3334 2.53667 12.3992 1.66667 11.25 1.66667H8.75002C7.60085 1.66667 6.66669 2.53667 6.66669 3.60667V5.00001H3.33335H2.50002C2.04169 5.00001 1.66669 5.37501 1.66669 5.83334C1.66669 6.29167 2.04169 6.66667 2.50002 6.66667H3.33335V15.8333C3.33335 17.2117 4.45502 18.3333 5.83335 18.3333H14.1667C15.545 18.3333 16.6667 17.2117 16.6667 15.8333V6.66667H17.5C17.9584 6.66667 18.3334 6.29167 18.3334 5.83334C18.3334 5.37501 17.9584 5.00001 17.5 5.00001Z"
                    fill="#C5CEE0"
                  />
                  <mask
                    id="mask0_212_384"
                    style="mask-type: alpha"
                    maskUnits="userSpaceOnUse"
                    x="1"
                    y="1"
                    width="18"
                    height="18"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M8.33335 13.3333C8.33335 13.7917 7.95835 14.1667 7.50002 14.1667C7.04169 14.1667 6.66669 13.7917 6.66669 13.3333V10C6.66669 9.54167 7.04169 9.16667 7.50002 9.16667C7.95835 9.16667 8.33335 9.54167 8.33335 10V13.3333ZM13.3334 13.3333C13.3334 13.7917 12.9584 14.1667 12.5 14.1667C12.0417 14.1667 11.6667 13.7917 11.6667 13.3333V10C11.6667 9.54167 12.0417 9.16667 12.5 9.16667C12.9584 9.16667 13.3334 9.54167 13.3334 10V13.3333ZM15 15.8333C15 16.2925 14.6267 16.6667 14.1667 16.6667H5.83335C5.37335 16.6667 5.00002 16.2925 5.00002 15.8333V6.66667H15V15.8333ZM8.33335 3.60667C8.33335 3.47751 8.51169 3.33334 8.75002 3.33334H11.25C11.4884 3.33334 11.6667 3.47751 11.6667 3.60667V5.00001H8.33335V3.60667ZM17.5 5.00001H16.6667H13.3334V3.60667C13.3334 2.53667 12.3992 1.66667 11.25 1.66667H8.75002C7.60085 1.66667 6.66669 2.53667 6.66669 3.60667V5.00001H3.33335H2.50002C2.04169 5.00001 1.66669 5.37501 1.66669 5.83334C1.66669 6.29167 2.04169 6.66667 2.50002 6.66667H3.33335V15.8333C3.33335 17.2117 4.45502 18.3333 5.83335 18.3333H14.1667C15.545 18.3333 16.6667 17.2117 16.6667 15.8333V6.66667H17.5C17.9584 6.66667 18.3334 6.29167 18.3334 5.83334C18.3334 5.37501 17.9584 5.00001 17.5 5.00001Z"
                      fill="white"
                    />
                  </mask>
                  <g mask="url(#mask0_212_384)"></g>
                </svg>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- PAGINATION -->
    <div class="pagination">
      <div class="pagination-left">
        <label>
          Items per page
          <select
            class="select small"
            (change)="onPageSizeChange($any($event.target).value)"
          >
            <option value="4">4</option>
            <option value="10" selected>10</option>
            <option value="25">25</option>
          </select>
        </label>
        <span class="range-text">1–4 of 10</span>
      </div>

      <div class="pagination-right">
        <button
          class="icon-button"
          aria-label="Previous page"
          (click)="prevPage()"
        >
          ‹
        </button>
        <button class="icon-button" aria-label="Next page" (click)="nextPage()">
          ›
        </button>
      </div>
    </div>
  </section>

  <!-- ADD USER MODAL -->
  <div
    class="modal-backdrop"
    *ngIf="showAddUserModal"
    (click)="closeAddUser()"
  ></div>

  <div
    class="modal"
    *ngIf="showAddUserModal"
    (click)="$event.stopPropagation()"
  >
    <div class="modal-header">
      <h3>Add User</h3>
      <button class="icon-button" (click)="closeAddUser()">✕</button>
    </div>

    <div class="modal-body">
      <!-- USER ID -->
      <div class="form-row">
        <input
          type="text"
          class="input"
          placeholder="User ID *"
          [(ngModel)]="newUser.userId"
        />
      </div>

      <!-- NAME -->
      <div class="form-grid-2">
        <div class="form-row">
          <input
            type="text"
            class="input"
            placeholder="First Name *"
            [(ngModel)]="newUser.firstName"
          />
        </div>
        <div class="form-row">
          <input
            type="text"
            class="input"
            placeholder="Last Name *"
            [(ngModel)]="newUser.lastName"
          />
        </div>
      </div>

      <!-- EMAIL + MOBILE -->
      <div class="form-grid-3">
        <div class="form-row">
          <input
            type="email"
            class="input"
            placeholder="Email ID *"
            [(ngModel)]="newUser.email"
          />
        </div>
        <div class="form-row">
          <input
            type="tel"
            class="input"
            placeholder="Mobile No"
            [(ngModel)]="newUser.phone"
          />
        </div>
        <select class="input" [(ngModel)]="newUser.roleId">
          <option value="">Select role Type</option>
          <option *ngFor="let r of roles" [value]="r.roleId">
            {{ r.roleName }}
          </option>
        </select>
      </div>

      <!-- USERNAME + PASSWORD -->
      <div class="form-grid-3">
        <input
          type="text"
          class="input"
          placeholder="Username *"
          [(ngModel)]="newUser.username"
        />
        <div class="form-row">
          <input
            type="password"
            class="input"
            placeholder="Password *"
            [(ngModel)]="newUser.password"
          />
        </div>
        <div class="form-row">
          <input
            type="password"
            class="input"
            placeholder="Confirm password *"
            [(ngModel)]="newUser.confirmPassword"
          />
        </div>
      </div>

      <!-- MODULE PERMISSION T  ABLE -->
    </div>

    <div class="form-section">
      <div class="permission-table-wrapper">
        <table class="permission-table">
          <thead>
            <tr>
              <th>Module Permission</th>
              <th>Read</th>
              <th>Write</th>
              <th>Delete</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let p of modulePermissions">
              <td>{{ p.name }}</td>
              <td class="perm-cell">
                <input
                  type="checkbox"
                  class="perm-checkbox"
                  [checked]="p.read"
                  disabled
                />
              </td>
              <td class="perm-cell">
                <input
                  type="checkbox"
                  class="perm-checkbox"
                  [checked]="p.write"
                  disabled
                />
              </td>
              <td class="perm-cell">
                <input
                  type="checkbox"
                  class="perm-checkbox"
                  [checked]="p.delete"
                  disabled
                />
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn primary" (click)="onSaveUser()">Add User</button>

      <button class="btn ghost" (click)="closeAddUser()">Cancel</button>
    </div>
  </div>
</div>
